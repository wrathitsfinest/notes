<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes - Your Personal Note-Taking App</title>
    <meta name="description"
        content="A beautiful and simple note-taking application to capture your thoughts and ideas.">

    <!-- PWA Meta Tags -->
    <script>
        // Immediate theme application to prevent flash
        (function () {
            const savedTheme = localStorage.getItem('theme');
            const savedColorTheme = localStorage.getItem('colorTheme') || 'cosmic';
            const html = document.documentElement;

            if (savedTheme === 'light' || (!savedTheme && window.matchMedia('(prefers-color-scheme: light)').matches)) {
                html.setAttribute('data-theme', 'light');
            } else {
                html.setAttribute('data-theme', 'dark');
            }

            if (savedColorTheme !== 'cosmic') {
                html.setAttribute('data-color-theme', savedColorTheme);
            }

            const themeColors = {
                cosmic: '#a05aff',
                fire: '#f24040',
                ocean: '#29d1ed',
                forest: '#32cc70'
            };

            const meta = document.createElement('meta');
            meta.name = 'theme-color';
            meta.id = 'theme-meta';
            meta.content = themeColors[savedColorTheme] || themeColors.cosmic;
            document.head.appendChild(meta);
        })();
    </script>
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="My Notes">

    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="512x512" href="./icons/icon-512x512.png">
    <link rel="apple-touch-icon" sizes="512x512" href="./icons/icon-512x512.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="index.css">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle menu" data-i18n="toggle_menu"
                    data-i18n-target="aria">
                    <span class="hamburger-icon"></span>
                </button>
                <h1 class="app-title">
                    <span class="title-text" id="appTitle" data-i18n="app_title">My Notes</span>
                    <span class="title-count" id="appTitleCount"></span>
                </h1>
                <button class="btn-icon-action hidden" id="editGroupBtn" title="Group Settings"
                    data-i18n="group_settings" data-i18n-target="title">
                    <svg class="header-svg" version="1.0" xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 783.000000 784.000000" preserveAspectRatio="xMidYMid meet">
                        <g transform="translate(0.000000,784.000000) scale(0.100000,-0.100000)"
                            fill="var(--text-primary)" stroke="none">
                            <path
                                d="M1493 6165 c-29 -8 -70 -23 -90 -34 -52 -27 -125 -105 -159 -171 l-29 -55 -3 -1945 c-1 -1332 1 -1961 8 -1996 6 -28 19 -66 30 -86 10 -19 23 -53 29 -75 17 -63 73 -127 138 -160 l58 -28 2335 0 2335 0 55 22 c109 45 214 158 245 267 8 28 44 256 80 506 117 806 179 1228 290 1975 75 503 75 496 31 590 -48 105 -139 156 -292 163 l-101 5 -5 88 c-10 163 -97 296 -236 362 l-67 32 -1170 5 c-1098 5 -1172 6 -1206 23 -64 32 -98 78 -139 187 -79 208 -152 285 -307 325 -83 22 -1750 21 -1830 0z m1855 -209 c48 -33 81 -84 107 -166 41 -129 98 -210 188 -271 110 -73 34 -69 1312 -71 l1150 -3 40 -22 c83 -44 115 -104 115 -213 l0 -70 -491 0 c-462 0 -490 -1 -485 -17 3 -10 18 -51 34 -92 l27 -75 636 -1 c708 -1 671 3 705 -69 15 -30 14 -46 -10 -222 -15 -104 -31 -211 -36 -239 -5 -27 -34 -228 -65 -445 -31 -217 -60 -404 -65 -415 -6 -13 -9 15 -9 83 -1 109 -14 152 -50 172 -10 5 -90 32 -177 60 -88 28 -165 54 -172 58 -7 4 -25 33 -39 65 l-26 58 82 167 c45 92 81 175 81 185 0 10 -5 28 -11 40 -15 27 -335 358 -363 374 -39 23 -72 13 -237 -72 l-165 -84 -58 23 c-32 13 -61 28 -66 32 -4 5 -36 89 -71 188 -55 158 -66 181 -93 197 -28 17 -54 19 -283 19 l-251 0 -30 -25 c-25 -21 -41 -56 -86 -193 -31 -92 -60 -172 -64 -178 -4 -6 -33 -23 -66 -37 l-58 -27 -171 86 c-147 74 -175 85 -206 80 -29 -4 -65 -35 -213 -183 -185 -185 -205 -214 -189 -271 5 -15 43 -93 85 -174 l77 -146 -33 -66 c-18 -36 -37 -66 -44 -66 -19 0 -322 -99 -343 -111 -47 -30 -51 -52 -51 -312 0 -319 -18 -289 230 -373 l185 -62 27 -62 28 -63 -80 -165 c-53 -110 -80 -176 -80 -200 0 -30 11 -46 83 -121 46 -47 124 -128 173 -179 93 -98 127 -122 167 -122 14 0 98 36 186 80 89 44 167 80 174 80 6 0 35 -10 64 -22 58 -24 57 -22 133 -263 43 -136 45 -141 77 -162 24 -16 56 -18 264 -21 321 -4 311 -9 374 183 19 61 47 139 61 175 24 63 27 66 83 92 l59 26 167 -85 c212 -108 204 -109 333 19 51 51 134 137 184 191 117 126 117 120 10 333 l-81 161 32 64 32 64 183 60 182 60 -5 -30 c-3 -16 -43 -293 -90 -615 -94 -645 -95 -647 -173 -707 -24 -18 -59 -37 -80 -43 -49 -13 -4560 -14 -4596 0 -14 5 -34 18 -46 30 -26 26 -26 90 0 265 10 72 37 254 60 405 23 151 54 363 70 470 87 583 112 757 145 975 132 893 129 879 192 936 60 54 81 61 202 70 64 4 584 8 1156 8 572 0 1049 0 1060 1 17 0 26 15 48 83 15 46 27 86 27 90 0 4 -541 6 -1202 5 l-1203 -3 -57 -23 c-127 -51 -239 -167 -266 -274 -11 -41 -38 -221 -112 -723 -38 -255 -112 -751 -140 -935 -12 -74 -26 -172 -32 -217 -7 -46 -15 -83 -20 -83 -4 0 -7 672 -6 1493 l3 1493 27 42 c16 23 45 50 65 61 37 20 57 20 928 18 l890 -2 43 -29z m1736 -1203 c54 -164 63 -182 86 -188 14 -3 78 -29 143 -56 l117 -51 163 85 164 84 118 -116 118 -116 -85 -167 -84 -167 47 -96 c26 -53 53 -116 60 -141 13 -44 14 -45 84 -65 38 -12 115 -34 170 -51 55 -16 108 -32 118 -34 15 -5 17 -21 17 -157 0 -84 -4 -157 -8 -162 -4 -6 -89 -37 -188 -69 l-181 -59 -18 -56 c-10 -31 -37 -94 -60 -141 l-43 -85 85 -169 85 -169 -120 -120 -120 -119 -164 86 -165 86 -94 -44 c-52 -24 -116 -51 -142 -61 -38 -14 -49 -24 -54 -46 -3 -15 -29 -99 -57 -186 l-52 -158 -165 1 -164 2 -62 182 c-34 101 -65 186 -70 190 -4 3 -39 19 -78 35 -38 16 -96 41 -128 57 l-58 29 -171 -88 -172 -87 -116 122 -116 123 84 166 84 166 -45 96 c-25 53 -53 119 -64 146 l-19 50 -180 55 -179 56 -3 161 -2 162 72 21 c40 12 122 36 182 53 l109 33 37 89 c20 50 49 114 64 144 l27 53 -35 67 c-19 36 -57 111 -85 166 l-51 100 117 117 118 117 169 -85 168 -86 77 35 c42 19 104 45 138 57 l61 22 50 147 c27 80 55 163 62 184 l12 37 166 -2 166 -3 60 -182z" />
                            <path
                                d="M4710 4099 c-119 -30 -195 -74 -286 -164 -59 -58 -91 -100 -117 -151 -107 -214 -94 -447 35 -640 216 -322 682 -368 956 -93 112 113 169 244 179 410 18 303 -180 567 -478 639 -104 25 -192 25 -289 -1z m338 -214 c98 -49 163 -114 208 -209 77 -162 48 -347 -74 -479 -91 -97 -187 -138 -322 -138 -126 0 -216 37 -310 127 -95 90 -135 198 -128 337 8 150 92 280 226 350 92 48 130 57 235 53 78 -3 97 -8 165 -41z" />
                        </g>
                    </svg>
                </button>
                <button class="btn-icon-action hidden" id="editNoteBtn" title="Note Settings" data-i18n="note_settings"
                    data-i18n-target="title">
                    <svg class="header-svg" version="1.0" xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 783.000000 784.000000" preserveAspectRatio="xMidYMid meet">
                        <g transform="translate(0.000000,784.000000) scale(0.100000,-0.100000)"
                            fill="var(--text-primary)" stroke="none">
                            <path
                                d="M2857 6213 c-16 -8 -272 -255 -568 -551 -460 -460 -539 -542 -544 -572 -3 -19 -4 -758 -3 -1642 l3 -1608 33 -32 32 -33 722 -3 c797 -3 755 -6 783 60 15 37 5 82 -25 113 -20 20 -32 20 -685 23 l-665 2 0 1505 0 1505 483 0 c365 0 488 3 507 13 14 7 33 28 43 47 16 31 17 68 17 345 -1 171 -1 385 0 478 l0 167 895 0 895 0 0 -600 c0 -641 1 -654 48 -679 36 -19 80 -13 112 17 l31 27 -1 678 c0 442 -4 685 -10 698 -29 52 21 50 -1065 52 -800 2 -1013 0 -1038 -10z m-67 -688 l0 -345 -345 0 c-190 0 -345 3 -345 7 0 10 673 683 682 683 5 0 8 -155 8 -345z" />
                            <path
                                d="M2560 4493 c-91 -8 -132 -95 -76 -160 l24 -28 642 -3 642 -2 34 34 c19 19 34 44 34 55 0 32 -27 79 -52 92 -16 9 -182 12 -613 14 -324 1 -610 0 -635 -2z" />
                            <path
                                d="M4593 4480 c-40 -24 -52 -47 -97 -193 l-37 -118 -83 -41 -84 -41 -145 67 c-194 90 -172 97 -399 -131 -228 -230 -224 -216 -112 -424 l66 -122 -39 -85 -39 -85 -136 -43 c-115 -37 -141 -49 -166 -78 l-30 -34 -4 -244 c-6 -337 -11 -329 204 -393 l127 -38 41 -85 40 -84 -64 -122 c-72 -137 -84 -177 -64 -224 17 -42 333 -360 375 -378 18 -8 40 -14 50 -14 10 0 81 29 157 65 l138 64 84 -42 85 -42 35 -115 c20 -63 43 -129 51 -147 26 -56 51 -61 323 -63 135 -2 253 -2 262 -1 10 0 33 15 53 32 30 27 41 49 77 166 35 112 46 137 65 144 13 5 50 22 83 38 l60 30 138 -64 c75 -36 145 -65 155 -65 49 0 99 38 251 193 154 158 186 201 186 251 0 14 -29 83 -65 155 -36 71 -65 133 -65 133 0 7 39 97 63 143 10 20 37 33 146 67 104 33 141 50 165 73 l31 31 3 243 c3 266 -2 305 -50 340 -15 11 -85 39 -155 62 l-128 41 -40 83 -41 84 68 133 c71 141 79 173 53 228 -9 18 -93 110 -188 204 -172 171 -174 172 -218 172 -32 0 -71 -13 -145 -49 -166 -80 -157 -79 -241 -37 -40 20 -76 36 -80 36 -5 0 -26 59 -47 131 -22 72 -48 141 -58 155 -41 51 -58 54 -330 54 -233 0 -255 -2 -285 -20z m504 -310 c25 -74 52 -140 61 -147 10 -7 80 -45 157 -84 100 -51 146 -69 165 -66 14 3 78 31 142 61 65 31 121 56 125 56 5 0 61 -51 126 -112 l117 -113 -65 -125 c-42 -81 -64 -137 -65 -160 0 -21 19 -75 49 -140 27 -58 58 -126 69 -151 22 -52 26 -54 205 -107 l99 -28 -1 -164 0 -163 -73 -24 c-40 -13 -104 -32 -141 -44 -67 -20 -69 -22 -92 -72 -12 -29 -44 -98 -69 -155 -25 -57 -46 -116 -46 -130 1 -15 29 -83 65 -151 l64 -125 -49 -55 c-27 -31 -78 -85 -114 -120 l-65 -65 -135 62 c-75 34 -146 62 -159 62 -31 0 -281 -123 -310 -152 -14 -14 -38 -73 -62 -150 l-40 -128 -176 0 -176 0 -18 66 c-16 61 -70 212 -77 219 -2 1 -68 35 -147 75 -120 60 -151 71 -180 67 -20 -2 -87 -30 -150 -61 -62 -31 -117 -56 -120 -56 -4 0 -60 53 -124 117 l-117 117 65 122 c43 81 65 133 65 155 0 20 -28 96 -68 184 l-67 150 -60 22 c-33 12 -97 32 -142 44 l-83 22 0 164 c0 122 3 165 13 167 6 2 68 21 136 42 144 45 129 29 221 235 46 104 60 146 56 167 -4 15 -35 79 -69 143 l-63 116 116 120 116 120 135 -63 c74 -35 141 -63 149 -63 21 -1 313 142 326 160 6 8 28 68 48 134 21 66 39 125 41 132 3 8 53 11 176 10 l171 -2 45 -135z" />
                            <path
                                d="M4815 3500 c-251 -30 -451 -200 -521 -442 -97 -333 110 -683 452 -764 147 -35 323 -5 460 77 125 75 248 252 275 395 15 81 5 245 -19 314 -64 183 -191 319 -355 382 -44 17 -211 51 -227 47 -3 -1 -32 -5 -65 -9z m241 -231 c132 -62 223 -184 241 -319 12 -89 -1 -162 -42 -247 -134 -273 -520 -306 -710 -61 -51 65 -88 188 -82 265 8 101 44 188 105 254 103 112 195 151 338 145 66 -3 94 -10 150 -37z" />
                            <path
                                d="M2513 3955 c-39 -16 -53 -42 -53 -93 0 -28 7 -45 26 -63 l26 -24 366 -3 c406 -2 403 -3 437 61 l20 37 -20 37 c-11 21 -31 43 -45 50 -38 19 -713 18 -757 -2z" />
                        </g>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Mobile Overlay -->
            <div class="mobile-overlay" id="mobileOverlay"></div>

            <!-- Sidebar - Groups List -->
            <aside class="sidebar">
                <div class="sidebar-header" id="sidebarHeader">
                    <h2 class="sidebar-title" data-i18n="all_notes">All Notes</h2>
                    <span class="notes-count" id="sidebarStats"></span>
                </div>
                <button class="btn-new-group" id="newGroupBtn" aria-label="New Group" data-i18n="new_group"
                    data-i18n-target="aria">
                    <span class="btn-icon">+</span>
                    <span data-i18n="new_group">New Group</span>
                </button>
                <div class="groups-list" id="groupsList">
                    <!-- Groups will be dynamically inserted here -->
                </div>
                <!-- Version Footer -->
                <div class="sidebar-footer">
                    <div class="footer-actions">
                        <button class="theme-toggle" id="themeToggle" aria-label="Toggle Dark/Light Mode"
                            title="Toggle Theme">
                            <span class="theme-icon"></span>
                        </button>
                        <button class="settings-toggle" id="settingsToggle" aria-label="Open Settings" title="Settings"
                            data-i18n="settings" data-i18n-target="title">
                            <svg class="footer-svg" version="1.0" xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 784.000000 1168.000000" preserveAspectRatio="xMidYMid meet">
                                <g transform="translate(0.000000,1168.000000) scale(0.100000,-0.100000)"
                                    fill="currentColor" stroke="none">
                                    <path d="M3670 8811 c-145 -4 -222 -10 -237 -19 -41 -23 -70 -75 -88 -157 -46
-218 -128 -571 -134 -577 -6 -7 -321 -139 -403 -170 -25 -9 -45 1 -230 118
-112 71 -243 154 -292 186 -75 50 -95 58 -135 58 -29 0 -59 -8 -81 -21 -41
-25 -603 -590 -631 -634 -22 -34 -26 -114 -8 -148 7 -12 88 -140 181 -285 93
-145 171 -269 174 -276 5 -12 -149 -412 -164 -428 -7 -7 -112 -31 -460 -103
-117 -25 -222 -49 -232 -55 -11 -6 -32 -27 -47 -47 l-28 -36 -3 -451 c-2 -301
0 -463 8 -488 13 -44 67 -94 117 -107 21 -6 166 -35 322 -66 156 -31 293 -60
305 -64 18 -7 73 -129 173 -386 l16 -40 -173 -270 c-95 -149 -179 -284 -186
-302 -17 -39 -18 -91 -3 -130 12 -32 610 -637 651 -659 45 -24 98 -17 159 19
30 18 161 101 291 185 130 84 244 152 252 152 22 0 408 -158 422 -173 7 -6 42
-145 78 -307 36 -162 70 -311 76 -330 11 -43 62 -93 109 -109 44 -14 850 -15
903 -1 20 6 51 27 71 49 38 42 32 21 123 426 31 138 60 256 64 264 4 8 59 35
121 61 63 26 157 65 210 87 l96 41 299 -189 c319 -202 336 -210 402 -175 33
8 635 622 651 653 6 12 11 46 11 76 0 52 -4 61 -118 238 -181 282 -247 391
-245 403 3 11 163 409 166 413 2 1 154 33 340 72 359 74 381 82 410 143 18 39
23 212 19 659 -2 289 -3 297 -24 329 -43 63 -58 68 -404 141 -181 38 -332 69
-336 69 -3 0 -45 97 -92 215 l-85 215 53 83 c29 45 110 171 181 280 135 210
146 238 130 324 -6 33 -45 77 -298 332 -161 161 -310 306 -331 322 -46 34
-108 39 -159 13 -18 -9 -142 -87 -277 -174 -135 -86 -255 -162 -268 -169 -21
-11 -48 -2 -237 75 l-214 88 -16 75 c-16 71 -85 370 -121 524 -18 74 -47 117
-98 145 -27 15 -64 17 -271 18 -132 0 -337 -2 -455 -5z m637 -311 c13 -52 48
-203 78 -335 44 -193 60 -244 79 -263 22 -22 520 -232 583 -246 16 -4 42 -2
57 4 29 11 231 135 443 271 67 44 127 79 135 79 12 0 485 -469 502 -498 7 -11
-69 -136 -293 -482 -50 -78 -61 -102 -61 -137 0 -52 199 -558 237 -603 27 -32
28 -32 458 -123 l250 -52 0 -367 c0 -201 -3 -369 -6 -373 -4 -3 -62 -17 -130
-30 -117 -23 -403 -82 -497 -103 -49 -11 -85 -40 -101 -80 -6 -15 -56 -138
-111 -274 -67 -165 -100 -260 -100 -286 0 -44 3 -49 215 -381 l148 -232 -179
-182 c-260 -265 -323 -327 -331 -327 -5 0 -101 59 -213 131 -330 212 -360 229
-398 229 -35 0 -203 -63 -460 -172 -99 -42 -148 -69 -160 -86 -8 -13 -48 -166
-88 -339 -40 -173 -75 -321 -78 -329 -5 -12 -63 -14 -368 -12 l-362 3 -8 35
c-137 610 -145 639 -183 664 -32 21 -278 126 -437 187 -137 52 -172 58 -219
34 -40 -21 -499 -314 -521 -332 -9 -8 -22 -13 -30 -11 -7 1 -125 116 -261 255
l-249 252 35 53 c18 29 54 85 79 123 257 401 243 375 243 440 -1 53 -13 91
-103 313 -56 139 -109 263 -117 276 -9 13 -27 28 -41 35 -25 11 -272 65 -541
118 l-133 26 0 368 c0 202 3 370 8 372 4 3 151 35 326 71 175 37 332 74 348
82 34 18 44 38 163 341 105 265 108 275 91 322 -7 20 -90 157 -184 305 l-171
270 29 35 c16 20 129 136 252 258 l223 223 65 -42 c302 -193 510 -319 537
-324 25 -5 86 16 310 106 153 62 286 118 296 125 36 25 47 55 91 251 25 110
57 251 71 314 14 63 28 123 31 133 5 16 29 17 367 15 l361 -3 23 -95z" />
                                    <path d="M3749 7050 c-581 -93 -1020 -516 -1125 -1085 -33 -181 -15 -451 43
-625 68 -201 161 -356 305 -506 159 -165 348 -283 556 -348 256 -80 566 -76
822 11 313 106 598 357 748 658 97 196 136 365 135 590 0 232 -40 394 -149
605 -221 428 -644 691 -1134 705 -80 2 -170 0 -201 -5z m369 -226 c215 -38
431 -153 584 -312 212 -220 318 -474 318 -766 0 -402 -196 -743 -549 -956
-256 -153 -596 -190 -886 -95 -331 108 -597 369 -704 690 -167 502 27 1029
479 1302 231 139 486 185 758 137z" />
                                </g>
                            </svg>
                        </button>
                    </div>
                    <span class="app-version">v1.0.63</span>
                </div>
            </aside>

            <!-- Main Area - Notes or Editor -->
            <section class="main-area">
                <!-- Empty State - No Group Selected -->
                <div class="empty-state" id="emptyState">
                    <div class="empty-state-icon">üìÅ</div>
                    <h2 class="empty-state-title" data-i18n="empty_state_title">No Group Selected</h2>
                    <p class="empty-state-text" data-i18n="empty_state_text">Select a group from the sidebar to view its
                        notes.</p>
                </div>

                <!-- Notes List View -->
                <div class="notes-view" id="notesView" style="display: none;">
                    <div class="notes-grid" id="notesGrid">
                        <!-- Notes will be dynamically inserted here -->
                    </div>
                    <!-- Floating Action Button for New Note -->
                    <button class="fab-new-note" id="newNoteBtn" aria-label="New Note" data-i18n="new_note"
                        data-i18n-target="aria">
                        <span class="btn-icon">+</span>
                    </button>
                </div>

                <!-- Editor View -->
                <div class="editor-container" id="editorContainer" style="display: none;">
                    <div class="editor-header">
                        <button class="btn-back" id="backToNotesBtn" aria-label="Back to notes"
                            data-i18n="back_to_notes" data-i18n-target="aria">
                            <svg class="back-svg" fill="currentColor" viewBox="0 0 32 32" version="1.1"
                                xmlns="http://www.w3.org/2000/svg">
                                <title>arrow-left-to-line</title>
                                <path
                                    d="M30 14.75h-18.982l2.866-2.866c0.225-0.226 0.363-0.537 0.363-0.881 0-0.69-0.56-1.25-1.25-1.25-0.344 0-0.655 0.139-0.881 0.363l-5 5c-0.011 0.011-0.015 0.027-0.026 0.039-0.1 0.104-0.183 0.225-0.243 0.359l-0.003 0.008-0 0.004c-0.050 0.129-0.079 0.279-0.079 0.435 0 0.072 0.006 0.142 0.018 0.21l-0.001-0.007c0.007 0.058 0.018 0.108 0.031 0.158l-0.002-0.008c0.051 0.223 0.158 0.417 0.306 0.571l-0-0 5 5.001c0.226 0.226 0.539 0.366 0.884 0.366 0.691 0 1.251-0.56 1.251-1.251 0-0.346-0.14-0.658-0.367-0.885l-2.866-2.865h18.982c0.69 0 1.25-0.56 1.25-1.25s-0.56-1.25-1.25-1.25v0zM2 0.75c-0.69 0-1.25 0.56-1.25 1.25v0 28c0 0.69 0.56 1.25 1.25 1.25s1.25-0.56 1.25-1.25v0-28c0-0.69-0.56-1.25-1.25-1.25v0z">
                                </path>
                            </svg>
                        </button>
                        <input type="text" class="note-title-input" id="noteTitleInput" placeholder="Note Title"
                            maxlength="100" data-i18n="note_title_placeholder">
                    </div>
                    <div class="note-content-input" id="noteContentInput" contenteditable="true"
                        placeholder="Start typing your note..." data-i18n="note_content_placeholder"></div>
                    <div class="editor-footer">
                        <div class="editor-menu" id="editorMenu">
                            <button class="editor-menu-btn" id="addCheckboxBtn" title="Toggle Checkbox"
                                data-i18n="toggle_checkbox" data-i18n-target="title">
                                <svg class="editor-svg" version="1.0" xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 466.000000 437.000000" preserveAspectRatio="xMidYMid meet">
                                    <g transform="translate(0.000000,437.000000) scale(0.100000,-0.100000)"
                                        fill="currentColor" stroke="none">
                                        <path
                                            d="M1361 3539 c-187 -31 -359 -207 -390 -399 -14 -87 -15 -1780 -1 -1870 30 -192 189 -360 378 -399 74 -15 1850 -15 1924 0 131 27 269 130 331 246 53 99 57 146 57 646 0 404 -2 463 -16 493 -34 72 -129 84 -188 25 l-31 -31 -5 -493 c-4 -441 -7 -495 -22 -523 -25 -46 -77 -94 -123 -115 -38 -18 -91 -19 -963 -19 -761 0 -928 2 -956 14 -46 19 -104 72 -129 120 l-22 41 -3 908 c-1 593 1 921 8 946 15 56 63 116 117 148 l48 28 735 5 c612 4 739 7 756 19 55 36 70 118 32 166 -44 56 -27 55 -785 54 -384 -1 -722 -5 -752 -10z" />
                                        <path
                                            d="M3607 3539 c-20 -5 -50 -16 -65 -26 -15 -9 -298 -286 -629 -617 l-602 -600 -238 236 c-170 169 -251 243 -283 257 -154 70 -330 -45 -330 -217 0 -105 16 -126 381 -486 181 -179 344 -334 362 -343 22 -12 55 -18 107 -18 64 0 82 4 120 27 26 15 349 331 746 730 759 760 729 726 727 834 -3 146 -152 259 -296 223z" />
                                    </g>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Settings View -->
                <div class="settings-view" id="settingsView" style="display: none;">
                    <div class="settings-header">
                        <button class="btn-icon-action" id="settingsHomeBtn" title="Back to main"
                            data-i18n="back_to_main" data-i18n-target="title">
                            <svg class="header-svg" version="1.0" xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 784.000000 1168.000000" preserveAspectRatio="xMidYMid meet">
                                <g transform="translate(0.000000,1168.000000) scale(0.100000,-0.100000)"
                                    fill="var(--text-primary)" stroke="none">
                                    <path d="M3808 8153 c-174 -170 -2191 -2192 -2199 -2205 -5 -7 -9 -32 -9 -56
0 -61 40 -102 102 -102 l43 0 1010 1013 c556 558 1045 1047 1088 1087 l78 74
1077 -1076 c592 -592 1087 -1081 1099 -1087 36 -18 79 -13 111 14 37 31 48 72
30 114 -12 29 -2253 2282 -2290 2302 -33 18 -52 8 -140 -78z" />
                                    <path d="M5664 5743 c-12 -2 -34 -18 -50 -34 l-29 -30 -3 -1000 -2 -999 -255
0 -255 0 0 -79 c0 -43 3 -93 6 -110 l7 -31 306 0 c286 0 308 1 338 20 18 10
40 31 50 47 17 26 18 84 21 1048 2 561 0 1039 -3 1063 -10 71 -67 117 -131
105z" />
                                    <path d="M2079 5709 l-29 -31 0 -1062 c0 -1020 1 -1062 19 -1092 42 -68 -51
-64 1385 -64 l1296 0 0 110 0 110 -1245 0 -1245 0 0 990 c0 864 -2 995 -15
1020 -19 37 -43 50 -95 50 -34 0 -48 -6 -71 -31z" />
                                    <path d="M3192 4146 c-32 -30 -37 -40 -36 -76 1 -33 8 -49 33 -74 l31 -31 695
-3 695 -2 36 33 c29 27 36 40 36 71 0 43 -25 84 -63 103 -18 10 -185 13 -707
13 l-682 0 -38 -34z" />
                                </g>
                            </svg>
                        </button>
                        <h2 class="settings-title" data-i18n="general_settings">General Settings</h2>
                    </div>
                    <div class="settings-content">
                        <div class="settings-item">
                            <label class="settings-label" data-i18n="language">Language</label>
                            <select class="settings-select" id="languageSelect">
                                <option value="en">English</option>
                                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                            </select>
                        </div>
                        <div class="settings-item">
                            <label class="settings-label" data-i18n="theme_color">Theme Color</label>
                            <div class="theme-color-picker" id="themeColorPicker">
                                <label class="theme-color-option">
                                    <input type="radio" name="themeColor" value="cosmic" checked>
                                    <span class="theme-color-circle theme-cosmic"></span>
                                </label>
                                <label class="theme-color-option">
                                    <input type="radio" name="themeColor" value="fire">
                                    <span class="theme-color-circle theme-fire"></span>
                                </label>
                                <label class="theme-color-option">
                                    <input type="radio" name="themeColor" value="ocean">
                                    <span class="theme-color-circle theme-ocean"></span>
                                </label>
                                <label class="theme-color-option">
                                    <input type="radio" name="themeColor" value="forest">
                                    <span class="theme-color-circle theme-forest"></span>
                                </label>
                            </div>
                        </div>

                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Generic Input Modal -->
    <dialog class="input-modal" id="inputModal">
        <form method="dialog" class="modal-form">
            <h3 class="modal-title" id="modalTitle" data-i18n="enter_value">Enter Value</h3>

            <div class="input-group">
                <input type="text" class="modal-input" id="modalInput" autocomplete="off" placeholder="Name"
                    data-i18n="modal_name_placeholder">
            </div>

            <div class="group-picker-section hidden" id="modalGroupSection">
                <label class="section-label" data-i18n="label_category">Category</label>
                <select class="modal-select" id="groupSelector">
                    <!-- Groups will be populated here -->
                </select>
            </div>

            <div class="color-picker-section">
                <label class="section-label" data-i18n="label_color">Color</label>
                <div class="color-grid" id="modalColorGrid">
                    <!-- Default/None -->
                    <label class="color-option">
                        <input type="radio" name="color" value="none" checked>
                        <span class="color-circle"
                            style="background: var(--bg-card); border: 2px solid var(--border-color);"></span>
                    </label>
                    <label class="color-option">
                        <input type="radio" name="color" value="coral">
                        <span class="color-circle" style="background: var(--color-coral);"></span>
                    </label>
                    <label class="color-option">
                        <input type="radio" name="color" value="peach">
                        <span class="color-circle" style="background: var(--color-peach);"></span>
                    </label>
                    <label class="color-option">
                        <input type="radio" name="color" value="sand">
                        <span class="color-circle" style="background: var(--color-sand);"></span>
                    </label>
                    <label class="color-option">
                        <input type="radio" name="color" value="mint">
                        <span class="color-circle" style="background: var(--color-mint);"></span>
                    </label>
                    <label class="color-option">
                        <input type="radio" name="color" value="sage">
                        <span class="color-circle" style="background: var(--color-sage);"></span>
                    </label>
                    <label class="color-option">
                        <input type="radio" name="color" value="sky">
                        <span class="color-circle" style="background: var(--color-sky);"></span>
                    </label>
                    <label class="color-option">
                        <input type="radio" name="color" value="lavender">
                        <span class="color-circle" style="background: var(--color-lavender);"></span>
                    </label>
                    <label class="color-option">
                        <input type="radio" name="color" value="rose">
                        <span class="color-circle" style="background: var(--color-rose);"></span>
                    </label>
                </div>
            </div>

            <div class="modal-actions">
                <button type="button" id="modalDeleteBtn" class="btn-text btn-danger hidden"
                    style="margin-right: auto;">Delete Group</button>
                <button value="cancel" class="btn-text" data-i18n="cancel">Cancel</button>
                <button value="confirm" class="btn-primary-small" data-i18n="save">Save</button>
            </div>
        </form>
    </dialog>

    <script src="i18n.js"></script>
    <script src="app.js"></script>

    <!-- Service Worker Registration -->
    <script>
        // Register service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then((registration) => {
                        console.log('‚úÖ Service Worker registered successfully:', registration.scope);
                    })
                    .catch((error) => {
                        console.error('‚ùå Service Worker registration failed:', error);
                    });
            });
        }

        // Handle PWA install prompt
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent the mini-infobar from appearing on mobile
            e.preventDefault();
            // Stash the event so it can be triggered later
            deferredPrompt = e;
            console.log('üí° App can be installed!');

            // Optionally, you could show a custom install button here
            // For now, we'll just log it
        });

        window.addEventListener('appinstalled', () => {
            console.log('üéâ App installed successfully!');
            deferredPrompt = null;
        });
    </script>
</body>

</html>